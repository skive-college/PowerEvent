@page
@model opretAktivit
@{
    ViewData["Title"] = "OpretAktivitet";
}

    <div class="container">
        
        <div class="row">
            Opret aktivitet: <input id="TxtAktivitet" type="text" placeholder="Aktivitet" />
            <style> #PointTypeList { width: 140px; } #PointTypeList:focus { min-width: 140px; width: auto; } </style>
            <select id="PointTypeList" asp-for="@Model.SelectedPointType" onchange="elementChanged('PointTypeList')">
                @{
                    if (Model.SelectedPointType == -1)
                    {
                        <option value="-1">Vælg PointType</option>
                    }
                    foreach (var item in @Model.PointTypeList)
                    {
                        <option value="@item.Value">@item.Text</option>
                    }
                }
            </select>
            <style> #HoldSportList { width: 140px; } #HoldSportList:focus { min-width: 140px; width: auto; } </style>
            <select id="HoldSportList" asp-for="@Model.SelectedHoldSport" onchange="elementChanged('HoldSportList')">
                @{
                    if (Model.SelectedHoldSport == -1)
                    {
                        <option value="-1">Vælg HoldSport</option>
                    }
                    foreach (var item in @Model.HoldSportList)
                    {
                        <option value="@item.Value">@item.Text</option>
                    }
                }
            </select>
            <input type="button" value="Gem" onclick="elementChanged('CmdGemAktivitet')"/>
        </div>
        <br />


        <div class="row">
            <div>
                <select id="AktivitetList" asp-for="@Model.SelectedAktivitetList" onchange="elementChanged('AktivitetList')" multiple style=" height: 350px; width: 450px">
                    @{
                        <option value="-1" hidden></option>
                        foreach (var item in @Model.AktivitetList)
                        {
                            <option value="@item.Value">@item.Text</option>
                        }
                    }

                </select>

                <input type="button" value="Slet" onclick="elementChanged('CmdSletAktivitet')" />
            </div>
        </div>
    </div>

@section Scripts
{
    <script>
        function elementChanged(elementet)
        {
            let url = new URL(location.href);
            url.searchParams.set("TxtAktivitet", '');
            
            let PointTypeList = document.getElementById('PointTypeList');
            let PointTypeListValgt = PointTypeList.options[PointTypeList.selectedIndex].value;
            url.searchParams.set("PointTypeList", PointTypeListValgt);

            let HoldSportList = document.getElementById('HoldSportList');
            let HoldSportListValgt = HoldSportList.options[HoldSportList.selectedIndex].value;
            url.searchParams.set("HoldSportList", HoldSportListValgt);

            let AktivitetList = document.getElementById('AktivitetList');
            let AktivitetListValgt = AktivitetList.options[AktivitetList.selectedIndex].value;
            url.searchParams.set("AktivitetList", AktivitetListValgt);

            if (elementet == 'CmdGemAktivitet') {
                let valgtAktivitet = document.getElementById('TxtAktivitet').value;
                url.searchParams.set("TxtAktivitet", valgtAktivitet);
            }

            url.searchParams.set("ValgtGuiElemement", elementet);
            location.href = url;
        }
    </script>
}